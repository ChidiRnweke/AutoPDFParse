# AutoPDFParse

A Python package for parsing PDF documents using OpenAI vision models. This package automatically detects when a PDF contains layout-dependent content (tables, charts, complex formatting) and uses AI vision models to extract the content accurately.

## Features

- Automatic detection of layout-dependent content
- Visual parsing for complex documents with tables, charts, etc.
- Fallback to raw text extraction when appropriate
- Retry logic for API calls
- Error handling and custom exceptions
- Async API for better performance

## Installation

Basic installation:

```bash
pip install autopdfparse
```

With OpenAI support:

```bash
pip install "autopdfparse[openai]"
```

With other AI providers:

```bash
# Google Gemini 
pip install "autopdfparse[gemini]"

# Anthropic Claude
pip install "autopdfparse[anthropic]"

# All providers
pip install "autopdfparse[openai,gemini,anthropic]"
```

## Usage

### Basic Example

```python
import asyncio
from autopdfparse import OpenAIParser

async def main():
    # Parse from file
    parser = await OpenAIParser.from_file(
        file_path="path/to/document.pdf",
        api_key="your_openai_api_key"
    )
    
    # Parse the document
    result = await parser.parse()
    
    # Get all content concatenated
    all_content = result.get_all_content()
    print(all_content)

if __name__ == "__main__":
    asyncio.run(main())
```

### Accessing Individual Pages

```python
async def process_pages():
    parser = await OpenAIParser.from_file(
        file_path="path/to/document.pdf",
        api_key="your_openai_api_key"
    )
    
    result = await parser.parse()
    
    # Access individual pages
    for page in result.pages:
        print(f"Page {page.page_number}:")
        print(page.content)
        print(f"Generated by LLM: {page._from_llm}")
```

### Custom Model Selection

```python
parser = await OpenAIParser.from_file(
    file_path="path/to/document.pdf",
    api_key="your_openai_api_key",
    description_model="gpt-4.1",  # Use a specific model for content description
    visual_model="gpt-4.1-mini",  # Use a specific model for layout detection
    retries=5                      # Set custom retry count
)
```

### Error Handling

```python
from autopdfparse import OpenAIParser, PDFParsingError, APIError, ModelError

async def handle_errors():
    try:
        parser = await OpenAIParser.from_file(
            file_path="path/to/document.pdf",
            api_key="your_openai_api_key"
        )
        result = await parser.parse()
    except ModelError as e:
        print(f"Model error (missing dependency?): {e}")
    except PDFParsingError as e:
        print(f"PDF parsing error: {e}")
    except APIError as e:
        print(f"API error: {e}")
    except Exception as e:
        print(f"Unexpected error: {e}")
```

## Requirements

- Python 3.12+

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.
